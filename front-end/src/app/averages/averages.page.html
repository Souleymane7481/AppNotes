<ion-header>
  <ion-toolbar>
    <ion-title>Liste des moyennes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- üîπ Section calculer moyenne -->
  <ion-item>
    <ion-label position="floating">ID √©tudiant</ion-label>
    <ion-input [(ngModel)]="studentIdToCalculate"></ion-input>
  </ion-item>
  <ion-button expand="full" (click)="calculateAverage()" [disabled]="loading || !studentIdToCalculate">
    Calculer la moyenne
  </ion-button>

  <div *ngIf="loading">
    Chargement...
  </div>

  <div *ngIf="error">
    {{ error }}
  </div>

  <!-- Liste des √©tudiants -->
  <ion-list *ngIf="students.length > 0">
    <ion-item *ngFor="let s of students">
      <ion-label>
        <h2>{{ s.studentName }} ({{ s.studentId }})</h2>

        <!-- Moyenne g√©n√©rale -->
        <p *ngIf="s.generalAverage !== null">
          Moyenne g√©n√©rale : <strong>{{ s.generalAverage | number:'1.2-2' }}</strong>
        </p>
        <p *ngIf="s.generalAverage === null">
          Moyenne g√©n√©rale non calcul√©e
        </p>

        <!-- Moyennes par semestre -->
        <div *ngIf="s.averagesBySemester && s.averagesBySemester.length > 0">
          <p *ngFor="let sem of s.averagesBySemester">
            Semestre {{ sem.semester }} : <strong>{{ sem.average | number:'1.2-2' }}</strong>
          </p>
        </div>
      </ion-label>
    </ion-item>
  </ion-list>

</ion-content>
